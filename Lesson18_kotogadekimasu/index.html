<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanese Speaking Training</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .card-container { perspective: 1000px; }
        .card { transition: transform 0.6s; transform-style: preserve-3d; cursor: pointer; }
        .card.is-flipped { transform: rotateY(180deg); }
        .card-face {
            backface-visibility: hidden; position: absolute;
            width: 100%; height: 100%; display: flex;
            flex-direction: column; align-items: center;
            justify-content: center; border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
        .card-back { transform: rotateY(180deg); }
        .action-icon { font-size: 5rem; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans flex flex-col">

    <header class="bg-indigo-600 text-white p-4 shadow-md text-center">
        <h1 class="text-xl font-bold">Speak with Illustrations!</h1>
        <p class="text-sm opacity-90">Look, Think, and Speak Japanese</p>
    </header>

    <main class="flex-grow flex flex-col items-center p-6 max-w-2xl mx-auto w-full">
        <!-- Mode Selector -->
        <div class="flex space-x-1 mb-6 bg-gray-200 p-1 rounded-lg w-full overflow-x-auto">
            <button id="mode-ability" class="flex-1 whitespace-nowrap px-2 py-2 rounded-md font-medium transition bg-white shadow-sm text-indigo-600" onclick="switchMode('ability')">
                Can do
            </button>
            <button id="mode-hobby" class="flex-1 whitespace-nowrap px-2 py-2 rounded-md font-medium transition text-gray-600" onclick="switchMode('hobby')">
                Hobby
            </button>
            <button id="mode-before" class="flex-1 whitespace-nowrap px-2 py-2 rounded-md font-medium transition text-gray-600" onclick="switchMode('before')">
                Before ~
            </button>
        </div>

        <!-- Question Area -->
        <div id="game-view" class="w-full flex flex-col items-center">
            <div id="instruction" class="text-gray-600 mb-4 text-center text-lg font-medium">
                Look at the icons and make a sentence.
            </div>

            <!-- Card Container -->
            <div class="card-container w-full h-80 relative mb-8">
                <div id="practice-card" class="card w-full h-full relative" onclick="flipCard()">
                    <!-- Front -->
                    <div class="card-face card-front bg-white border-2 border-indigo-100 p-8 text-center">
                        <div id="prompt-content" class="flex flex-col items-center space-y-4"></div>
                        <div class="mt-auto text-[10px] text-gray-300">Tap to check the answer</div>
                    </div>
                    <!-- Back -->
                    <div class="card-face card-back bg-indigo-50 border-2 border-indigo-400 p-8">
                        <div id="answer-text" class="text-xl font-bold text-indigo-800 text-center leading-relaxed"></div>
                        <div class="mt-4 text-sm text-indigo-600">Tap again for next</div>
                    </div>
                </div>
            </div>

            <!-- Navigation -->
            <div class="flex justify-between w-full">
                <button onclick="prevQuestion()" class="px-6 py-2 border-2 border-gray-300 rounded-full text-gray-500 hover:bg-gray-100 transition">Back</button>
                <div class="flex items-center text-gray-500 font-mono">
                    <span id="current-index">1</span> / <span id="total-count">0</span>
                </div>
                <button onclick="nextQuestion()" class="px-6 py-2 bg-indigo-600 rounded-full text-white hover:bg-indigo-700 transition shadow-lg">Next</button>
            </div>
        </div>
    </main>

    <script>
        const abilityQuestions = [
            { icon: "üèä‚Äç‚ôÇÔ∏èüìè", hint: "How many meters?", answer: "„Å™„Çì„ÇÅ„Éº„Å®„Çã„Åê„Çâ„ÅÑ „Åä„Çà„Åê„Åì„Å®„Åå „Åß„Åç„Åæ„Åô„Åã„ÄÇ" },
            { icon: "üß†‚ùå", hint: "Can't remember Kanji", answer: "„Å™„Åã„Å™„Åã „Åã„Çì„Åò„Çí „Åä„Åº„Åà„Çã„Åì„Å®„Åå „Åß„Åç„Åæ„Åõ„Çì„ÄÇ" },
            { icon: "üè´üéì", hint: "Enter university", answer: "„ÅÑ„ÇÇ„ÅÜ„Å®„ÅØ „Å†„ÅÑ„Åå„Åè„Å´ „ÅØ„ÅÑ„Çã„Åì„Å®„Åå „Åß„Åç„Åæ„Åó„Åü„ÄÇ" },
            { icon: "üè´üëÄ", hint: "Visit from 10:00", answer: "„ÅÇ„Åï „Åò„ÇÖ„ÅÜ„Åò„Åã„Çâ „Åë„Çì„Åå„Åè„Åô„Çã„Åì„Å®„Åå „Åß„Åç„Åæ„Åô„ÄÇ" },
            { icon: "üóÑÔ∏è‚ùå", hint: "Too small to place", answer: "„Åõ„Åæ„ÅÑ„Åß„Åô„Åã„Çâ „Åä„Åè„Åì„Å®„Åå „Åß„Åç„Åæ„Åõ„Çì„ÄÇ" },
            { icon: "üö≤", hint: "Ride a bicycle", answer: "„Åò„Å¶„Çì„Åó„ÇÉ„Å´ „ÅÆ„Çã„Åì„Å®„Åå „Åß„Åç„Åæ„Åô„ÄÇ" },
            { icon: "üá´üá∑üëÑ", hint: "Speak French", answer: "„Åµ„Çâ„Çì„Åô„Åî„Çí „ÅØ„Å™„Åô„Åì„Å®„Åå „Åß„Åç„Åæ„Åô„ÄÇ" }
        ];

        const hobbyQuestions = [
            { icon: "üé§üé∂", hint: "Mr. Yamada", answer: "„ÇÑ„Åæ„Å†„Åï„Çì„ÅÆ „Åó„ÇÖ„Åø„ÅØ „ÅÜ„Åü„Çí „ÅÜ„Åü„ÅÜ„Åì„Å®„Åß„Åô„ÄÇ" },
            { icon: "üéπ", hint: "Ms. Ogawa", answer: "„Åä„Åå„Çè„Åï„Çì„ÅÆ „Åó„ÇÖ„Åø„ÅØ „Å¥„ÅÇ„ÅÆ„Çí „Å≤„Åè„Åì„Å®„Åß„Åô„ÄÇ" },
            { icon: "üç≥üç±", hint: "Mr. Santos", answer: "„Åï„Çì„Å®„Åô„Åï„Çì„ÅÆ „Åó„ÇÖ„Åø„ÅØ „Çä„Çá„ÅÜ„Çä„Çí „Å§„Åè„Çã„Åì„Å®„Åß„Åô„ÄÇ" },
            { icon: "üì¨üåè", hint: "Me (stamps)", answer: "„Çè„Åü„Åó„ÅÆ „Åó„ÇÖ„Åø„ÅØ „Åå„ÅÑ„Åì„Åè„ÅÆ „Åç„Å£„Å¶„Çí „ÅÇ„Å§„ÇÅ„Çã„Åì„Å®„Åß„Åô„ÄÇ" },
            { icon: "üì∏üå∏", hint: "Flower photos", answer: "„Çè„Åü„Åó„ÅÆ „Åó„ÇÖ„Åø„ÅØ „ÅØ„Å™„ÅÆ „Åó„ÇÉ„Åó„Çì„Çí „Å®„Çã„Åì„Å®„Åß„Åô„ÄÇ" }
        ];

        const beforeQuestions = [
            { icons: ["üö™", "üí°üì¥"], hints: ["Exit", "Turn off light"], answer: "„Å∏„ÇÑ„Çí „Åß„Çã„Åæ„Åà„Å´„ÄÅ„Åß„Çì„Åç„Çí „Åë„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ" },
            { icons: ["üõå", "üôè"], hints: ["Sleep", "Pray"], answer: "„Å≠„Çã„Åæ„Åà„Å´„ÄÅ„Åä„ÅÑ„ÅÆ„Çä„Çí „Åó„Åæ„Åô„ÄÇ" },
            { icons: ["üöóüí®", "üè†üìç"], hints: ["Drive", "Check address"], answer: "„ÅÜ„Çì„Å¶„Çì„Åô„Çã„Åæ„Åà„Å´„ÄÅ„Åò„ÇÖ„ÅÜ„Åó„Çá„Çí „Åã„Åè„Å´„Çì„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ" },
            { icons: ["üç±", "üßºüëê"], hints: ["Eat", "Wash hands"], answer: "„Åü„Åπ„Çã„Åæ„Åà„Å´„ÄÅ„Å¶„Çí „ÅÇ„Çâ„ÅÑ„Åæ„Åô„ÄÇ" },
            { icons: ["üåèüõ´", "üìñ"], hints: ["Come to Japan", "Studied Japanese"], answer: "„Å´„Åª„Çì„Å∏ „Åè„Çã„Åæ„Åà„Å´„ÄÅ„Å´„Åª„Çì„Åî„Çí „Åπ„Çì„Åç„Çá„ÅÜ„Åó„Åæ„Åó„Åü„ÄÇ" },
            { icons: ["üíä", "üçö"], hints: ["Take medicine", "Eat meal"], answer: "„Åî„ÅØ„Çì„Çí „Åü„Åπ„Çã„Åæ„Åà„Å´„ÄÅ„Åè„Åô„Çä„Çí „ÅÆ„Åø„Åæ„Åô„ÄÇ" }
        ];

        let currentMode = 'ability';
        let currentIndex = 0;
        let isFlipped = false;

        function switchMode(mode) {
            currentMode = mode;
            currentIndex = 0;
            isFlipped = false;
            document.getElementById('practice-card').classList.remove('is-flipped');
            
            const modes = ['ability', 'hobby', 'before'];
            modes.forEach(m => {
                const btn = document.getElementById(`mode-${m}`);
                if(m === mode) {
                    btn.classList.add('bg-white', 'shadow-sm', 'text-indigo-600');
                    btn.classList.remove('text-gray-600');
                } else {
                    btn.classList.remove('bg-white', 'shadow-sm', 'text-indigo-600');
                    btn.classList.add('text-gray-600');
                }
            });

            const instr = document.getElementById('instruction');
            if(mode === 'ability') instr.innerText = "Say what you 'can' do.";
            else if(mode === 'hobby') instr.innerText = "Talk about 'hobbies'.";
            else instr.innerText = "Practice 'Before A, do B'.";
            
            updateView();
        }

        function updateView() {
            const data = { ability: abilityQuestions, hobby: hobbyQuestions, before: beforeQuestions };
            const questions = data[currentMode];
            const q = questions[currentIndex];
            const promptContent = document.getElementById('prompt-content');
            
            promptContent.innerHTML = '';
            document.getElementById('current-index').innerText = currentIndex + 1;
            document.getElementById('total-count').innerText = questions.length;
            document.getElementById('answer-text').innerText = q.answer;

            if (currentMode !== 'before') {
                promptContent.innerHTML = `<div class="action-icon">${q.icon}</div><div class="text-gray-600 text-lg font-bold">${q.hint}</div>`;
            } else {
                const container = document.createElement('div');
                container.className = 'flex items-center space-x-4';
                container.innerHTML = `
                    <div class="flex flex-col items-center">
                        <div class="text-[10px] text-gray-400 mb-1">First (B)</div>
                        <div class="text-4xl bg-gray-50 p-4 rounded-full border">${q.icons[1]}</div>
                        <div class="text-[10px] mt-1">${q.hints[1]}</div>
                    </div>
                    <div class="text-2xl text-indigo-300">‚Üê</div>
                    <div class="flex flex-col items-center">
                        <div class="text-[10px] text-gray-400 mb-1">Later (A)</div>
                        <div class="text-4xl bg-gray-50 p-4 rounded-full border">${q.icons[0]}</div>
                        <div class="text-[10px] mt-1">${q.hints[0]}</div>
                    </div>
                `;
                promptContent.appendChild(container);
                promptContent.innerHTML += `<div class="text-indigo-500 font-bold mt-4">Before [A], do [B]</div>`;
            }
        }

        function flipCard() {
            const card = document.getElementById('practice-card');
            if (!isFlipped) {
                card.classList.add('is-flipped');
                isFlipped = true;
            } else {
                nextQuestion();
            }
        }

        function nextQuestion() {
            const data = { ability: abilityQuestions, hobby: hobbyQuestions, before: beforeQuestions };
            const questions = data[currentMode];
            isFlipped = false;
            document.getElementById('practice-card').classList.remove('is-flipped');
            setTimeout(() => {
                currentIndex = (currentIndex + 1) % questions.length;
                updateView();
            }, 150);
        }

        function prevQuestion() {
            const data = { ability: abilityQuestions, hobby: hobbyQuestions, before: beforeQuestions };
            const questions = data[currentMode];
            isFlipped = false;
            document.getElementById('practice-card').classList.remove('is-flipped');
            setTimeout(() => {
                currentIndex = (currentIndex - 1 + questions.length) % questions.length;
                updateView();
            }, 150);
        }

        updateView();
    </script>
</body>
</html>
